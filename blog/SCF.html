<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULå®‰å…¨åŠŸèƒ½æè¿°Promptç”¢ç”Ÿå™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #667eea;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .form-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid #e9ecef;
        }

        .section-title {
            color: #2c3e50;
            font-size: 1.4em;
            margin-bottom: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .icon {
            width: 24px;
            height: 24px;
            fill: #667eea;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1em;
        }

        .required {
            color: #e74c3c;
        }

        select, input, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1em;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            min-height: 200px;
            resize: vertical;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: block;
            margin: 20px auto;
            min-width: 200px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 1em;
            cursor: pointer;
            margin: 10px 5px;
            transition: background-color 0.3s ease;
        }

        .btn-secondary:hover {
            background: #218838;
        }

        .output-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border: 1px solid #e9ecef;
            margin-top: 30px;
        }

        .output-text {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            min-height: 400px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: #2c3e50;
        }

        .help-text {
            font-size: 0.9em;
            color: #6c757d;
            margin-top: 5px;
            font-style: italic;
        }

        .example-box {
            background: #e8f4f8;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 10px 0;
            border-radius: 0 10px 10px 0;
        }

        .example-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .char-counter {
            text-align: right;
            font-size: 0.8em;
            color: #6c757d;
            margin-top: 5px;
        }

        .feature-highlight {
            background: linear-gradient(135deg, #667eea20 0%, #764ba240 100%);
            border: 1px solid #667eea;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }

        .feature-highlight h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .feature-list {
            color: #34495e;
            font-size: 0.95em;
            line-height: 1.5;
        }

        .file-drop-zone {
            border: 2px dashed #667eea;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            background: #f8f9fa;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .file-drop-zone:hover {
            background: #e9ecef;
            border-color: #5a6fd8;
        }

        .file-drop-zone.dragover {
            background: #e8f4f8;
            border-color: #28a745;
        }

        .import-success {
            color: #28a745;
            font-weight: 600;
        }

        .import-error {
            color: #dc3545;
            font-weight: 600;
        }

        .data-preview {
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            font-family: monospace;
            font-size: 0.8em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f8f9fa;
            font-weight: 600;
        }
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”’ ULå®‰å…¨åŠŸèƒ½æè¿°Promptç”¢ç”Ÿå™¨</h1>
            <p>å°ˆæ¥­ç”Ÿæˆpromptï¼ŒåŒ…å«L3 RevieweræŠ€è¡“å¯©æŸ¥åŠŸèƒ½</p>
        </div>

        <!-- æª”æ¡ˆåŒ¯å…¥å€ -->
        <div class="form-section">
            <h2 class="section-title">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                </svg>
                æ¨™æº–èªå¥åº«åŒ¯å…¥ (é¸å¡«)
            </h2>

            <div class="form-group">
                <label for="fileInput">åŒ¯å…¥CSV/Excelæª”æ¡ˆ</label>
                <input type="file" id="fileInput" accept=".csv,.xlsx,.xls" onchange="handleFileUpload(event)">
                <div class="help-text">
                    æ”¯æ´CSVå’ŒExcelæ ¼å¼ã€‚å»ºè­°æª”æ¡ˆåŒ…å«ä»¥ä¸‹æ¬„ä½ï¼š
                    <br>â€¢ <strong>Category</strong> (é¡åˆ¥): Safety, Protection, Control, Monitoringç­‰
                    <br>â€¢ <strong>Description</strong> (æè¿°): æ¨™æº–æè¿°èªå¥
                    <br>â€¢ <strong>Usage</strong> (ç”¨é€”): ä½¿ç”¨å ´æ™¯èªªæ˜
                </div>
            </div>

            <div class="example-box">
                <div class="example-title">ğŸ“„ æª”æ¡ˆæ ¼å¼ç¯„ä¾‹</div>
                <table style="width: 100%; border-collapse: collapse; font-size: 0.9em;">
                    <tr style="background: #f8f9fa;">
                        <th style="border: 1px solid #ddd; padding: 8px;">Category</th>
                        <th style="border: 1px solid #ddd; padding: 8px;">Description</th>
                        <th style="border: 1px solid #ddd; padding: 8px;">Usage</th>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 8px;">Safety</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">The system immediately disconnected all power sources</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">Emergency shutdown</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 8px;">Protection</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">The temperature monitoring function was activated</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">Thermal protection</td>
                    </tr>
                </table>
            </div>

            <div id="importStatus" style="display: none; margin-top: 10px;">
                <div id="importMessage"></div>
                <div id="previewData" style="max-height: 200px; overflow-y: auto; margin-top: 10px;"></div>
            </div>
        </div>

        <!-- åŠŸèƒ½æè¿°å€ -->
        <div class="form-section">
            <h2 class="section-title">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                </svg>
                å®‰å…¨åŠŸèƒ½é‚è¼¯æè¿°
            </h2>

            <div class="form-group">
                <label for="functionDescription">å®Œæ•´åŠŸèƒ½æè¿° <span class="required">*</span></label>
                <textarea id="functionDescription" placeholder="è«‹è©³ç´°æè¿°å®‰å…¨åŠŸèƒ½çš„å®Œæ•´ä½œå‹•é‚è¼¯ï¼ŒåŒ…å«ï¼š

1. è§¸ç™¼æ¢ä»¶æˆ–è¼¸å…¥è¨Šè™Ÿï¼ˆå…·é«”æ•¸å€¼ã€é–¾å€¼ï¼‰
2. ç³»çµ±çš„éŸ¿æ‡‰å‹•ä½œï¼ˆç²¾ç¢ºæ­¥é©Ÿï¼‰
3. åŸ·è¡Œé †åºå’Œæ™‚é–“è¦æ±‚
4. è¼¸å‡ºçµæœæˆ–é æœŸæ•ˆæœ
5. å¤±æ•ˆä¿è­·æ©Ÿåˆ¶
6. å¾©ä½æ¢ä»¶å’Œç¨‹åº

ç¯„ä¾‹ï¼š
ç•¶æº«åº¦æ„Ÿæ¸¬å™¨æª¢æ¸¬åˆ°è¶…é85Â°CÂ±2Â°Cæ™‚ï¼Œæ§åˆ¶ç³»çµ±åœ¨50mså…§å•Ÿå‹•å†·å»é¢¨æ‰‡ä¸¦ç™¼å‡ºè²å…‰è­¦å ±ã€‚å¦‚æœæº«åº¦æŒçºŒä¸Šå‡é”åˆ°95Â°CÂ±1Â°Cï¼Œç³»çµ±æœƒåœ¨2ç§’Â±0.5ç§’å…§è‡ªå‹•åˆ‡æ–·ä¸»é›»æºä¸¦é€²å…¥å®‰å…¨åœæ©Ÿæ¨¡å¼ã€‚æ–·é›»å¾Œç³»çµ±ä¿æŒé–å®šç‹€æ…‹ï¼Œéœ€è¦æ‰‹å‹•æŒ‰ä¸‹å¾©ä½æŒ‰éˆ•ä¸¦ç¢ºèªæº«åº¦é™è‡³75Â°Cä»¥ä¸‹æ‰èƒ½é‡æ–°å•Ÿå‹•ã€‚" oninput="updateCharCount('functionDescription', 'descCharCount')"></textarea>
                <div class="char-counter" id="descCharCount">0 å­—å…ƒ</div>
            </div>

            <div class="example-box">
                <div class="example-title">ğŸ’¡ è©³ç´°æè¿°ç¯„ä¾‹</div>
                ç•¶æ€¥åœæŒ‰éˆ•è¢«æŒ‰ä¸‹æ™‚ï¼Œæ§åˆ¶å™¨åœ¨10mså…§åˆ‡æ–·æ‰€æœ‰é¦¬é”é›»æºï¼ŒåŒæ™‚å•Ÿå‹•æ©Ÿæ¢°ç…è»Šç³»çµ±ã€‚è¨­å‚™å¿…é ˆåœ¨3ç§’Â±0.2ç§’å…§å®Œå…¨åœæ­¢é‹è½‰ï¼Œåœæ­¢å¾Œçš„æ®˜é¤˜è½‰é€Ÿä¸å¾—è¶…é5 RPMã€‚ç³»çµ±é€²å…¥é–å®šç‹€æ…‹ï¼Œéœ€è¦æ‰‹å‹•è½‰å‹•å¾©ä½é–‹é—œè‡³è§£é™¤ä½ç½®ä¸¦ç¢ºèªæ‰€æœ‰å®‰å…¨æ¢ä»¶æ»¿è¶³å¾Œæ–¹å¯é‡æ–°å•Ÿå‹•ã€‚
            </div>
        </div>

        <!-- L3 Reviewer åŠŸèƒ½èªªæ˜ -->
        <div class="feature-highlight">
            <h3>ğŸ” L3 Reviewer æŠ€è¡“å¯©æŸ¥åŠŸèƒ½</h3>
            <div class="feature-list">
                ç”Ÿæˆçš„promptå°‡åŒ…å«L3 Reviewerè§’è‰²ï¼Œæœƒå¾ä»¥ä¸‹æŠ€è¡“é¢å‘æª¢æŸ¥æ‚¨çš„åŠŸèƒ½æè¿°ï¼š
                <br>â€¢ <strong>è§¸ç™¼æ¢ä»¶ç²¾ç¢ºåº¦</strong>ï¼šé–¾å€¼ã€å®¹å·®ã€ç’°å¢ƒæ¢ä»¶ç­‰æŠ€è¡“åƒæ•¸
                <br>â€¢ <strong>æ™‚åºè¦æ±‚å®Œæ•´æ€§</strong>ï¼šéŸ¿æ‡‰æ™‚é–“ã€å»¶é²è¦æ ¼ã€æ™‚åºåœ–éœ€æ±‚
                <br>â€¢ <strong>å®‰å…¨è¨­è¨ˆåˆè¦æ€§</strong>ï¼šå¤±æ•ˆæ¨¡å¼ã€å†—é¤˜è¨­è¨ˆã€è¨ºæ–·è¦†è“‹ç‡
                <br>â€¢ <strong>æ¸¬è©¦é©—è­‰è¦æ±‚</strong>ï¼šæ¸¬è©¦æ¢ä»¶ã€é©—æ”¶æ¨™æº–ã€èªè­‰è¦æ±‚
            </div>
        </div>

        <!-- ç”ŸæˆæŒ‰éˆ• -->
        <button class="btn-primary" onclick="generatePrompt()">
            ğŸš€ ç”Ÿæˆå°ˆæ¥­Promptï¼ˆå«L3æŠ€è¡“å¯©æŸ¥ï¼‰
        </button>

        <!-- æ•¸å€¼ä»£è™Ÿè½‰æ›èªªæ˜ -->
        <div class="feature-highlight" id="codeInfo" style="display: none;">
            <h3>ğŸ”’ æ•¸å€¼ä¿è­·æ©Ÿåˆ¶</h3>
            <div class="feature-list">
                ç‚ºä¿è­·å®¢æˆ¶é—œéµæ•¸æ“šï¼Œç³»çµ±å·²è‡ªå‹•å°‡æ•æ„Ÿæ•¸å€¼è½‰æ›ç‚ºä»£è™Ÿï¼š
                <div id="codeMapping" style="margin-top: 10px; font-family: monospace; background: white; padding: 10px; border-radius: 5px;"></div>
            </div>
        </div>

        <!-- è¼¸å‡ºå€ -->
        <div class="output-section" id="outputSection" style="display: none;">
            <h2 class="section-title">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7.07,18.28C7.5,17.38 10.12,16.5 12,16.5C13.88,16.5 16.5,17.38 16.93,18.28C15.57,19.36 13.86,20 12,20C10.14,20 8.43,19.36 7.07,18.28M18.36,16.83C16.93,15.09 13.46,14.5 12,14.5C10.54,14.5 7.07,15.09 5.64,16.83C4.62,15.5 4,13.82 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,13.82 19.38,15.5 18.36,16.83M12,6C10.06,6 8.5,7.56 8.5,9.5C8.5,11.44 10.06,13 12,13C13.94,13 15.5,11.44 15.5,9.5C15.5,7.56 13.94,6 12,6M12,11A1.5,1.5 0 0,1 10.5,9.5A1.5,1.5 0 0,1 12,8A1.5,1.5 0 0,1 13.5,9.5A1.5,1.5 0 0,1 12,11Z"/>
                </svg>
                ç”Ÿæˆçš„å°ˆæ¥­Promptï¼ˆå¯ç›´æ¥è¤‡è£½çµ¦LLMä½¿ç”¨ï¼‰
            </h2>
            
            <div class="output-text" id="outputText"></div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn-secondary" onclick="copyToClipboard()">
                    ğŸ“‹ è¤‡è£½åˆ°å‰ªè²¼ç°¿
                </button>
                <button class="btn-secondary" onclick="downloadPrompt()">
                    ğŸ’¾ ä¸‹è¼‰ç‚ºæ–‡å­—æª”
                </button>
                <button class="btn-secondary" onclick="clearForm()">
                    ğŸ”„ æ¸…é™¤é‡å¡«
                </button>
            </div>
        </div>

        <!-- AIå›å¾©è½‰æ›å€ -->
        <div class="output-section">
            <h2 class="section-title">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M12,11A1,1 0 0,0 11,12A1,1 0 0,0 12,13A1,1 0 0,0 13,12A1,1 0 0,0 12,11M12.5,2C17,2 20.5,5.5 20.5,10C20.5,12.5 19.4,14.7 17.7,16.1C16.8,16.8 16.2,17.8 16.2,19V21.5C16.2,22.3 15.5,23 14.7,23H9.2C8.4,23 7.7,22.3 7.7,21.5V19C7.7,17.8 7.1,16.8 6.2,16.1C4.5,14.7 3.4,12.5 3.4,10C3.4,5.5 6.9,2 11.4,2H12.5Z"/>
                </svg>
                AIå›å¾©æ•¸å€¼é‚„åŸ
            </h2>

            <div class="form-group">
                <label for="aiResponse">AIå›å¾©å…§å®¹</label>
                <textarea id="aiResponse" placeholder="å°‡AIçš„å›å¾©å…§å®¹è²¼å…¥æ­¤è™•ï¼Œç³»çµ±æœƒè‡ªå‹•å°‡ä»£è™Ÿ [AAA], [BBB], [CCC] ç­‰é‚„åŸç‚ºåŸå§‹æ•¸å€¼..."></textarea>
                <div class="help-text">è²¼å…¥AIå›å¾©å¾Œï¼Œé»æ“Šä¸‹æ–¹æŒ‰éˆ•è‡ªå‹•é‚„åŸæ‰€æœ‰æ•¸å€¼ä»£è™Ÿ</div>
            </div>

            <button class="btn-secondary" onclick="restoreNumbers()" id="restoreBtn" style="display: none;">
                ğŸ”„ é‚„åŸæ•¸å€¼ä»£è™Ÿ
            </button>

            <div class="form-group">
                <label for="restoredResponse">é‚„åŸå¾Œå…§å®¹</label>
                <textarea id="restoredResponse" placeholder="é‚„åŸæ•¸å€¼å¾Œçš„å…§å®¹å°‡é¡¯ç¤ºåœ¨é€™è£¡..." readonly></textarea>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="btn-secondary" onclick="copyRestored()">
                    ğŸ“‹ è¤‡è£½é‚„åŸå…§å®¹
                </button>
                <button class="btn-secondary" onclick="downloadRestored()">
                    ğŸ’¾ ä¸‹è¼‰é‚„åŸå…§å®¹
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script>
        let importedData = null;
        let numberMapping = {}; // å„²å­˜æ•¸å€¼å°æ‡‰é—œä¿‚
        let codeCounter = 0;

        function generateCode() {
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            let code = '';
            let num = codeCounter;
            
            // ç”Ÿæˆä¸‰ä½å­—æ¯ä»£è™Ÿ
            for (let i = 0; i < 3; i++) {
                code = letters[num % 26] + code;
                num = Math.floor(num / 26);
            }
            
            codeCounter++;
            return code;
        }

        function replaceNumbersWithCodes(text) {
            // é‡ç½®å°æ‡‰è¡¨å’Œè¨ˆæ•¸å™¨
            numberMapping = {};
            codeCounter = 0;

            // æ–°çš„æ ¸å¿ƒæ•¸å­—åŒ¹é…æ¨¡å¼ï¼Œå¢åŠ äº†ä¸€å€‹"è² å‘å…ˆè¡Œæ–·è¨€" (?!...)
            // é€™æœƒç¢ºä¿æˆ‘å€‘åŒ¹é…çš„æ•¸å­—å¾Œé¢ä¸æœƒç·Šè·Ÿè‘— Â°C æˆ– Â°F
            const numberPattern = /(\d+(?:\.\d+)?(?:\s*[Â±~]\s*\d+(?:\.\d+)?)?|\d+(?:\.\d+)?)(?![\s]*(?:Â°C|Â°F))/g;

            return text.replace(numberPattern, (match, ...args) => {
                // `replace` å‡½å¼æœƒå‚³å…¥å¤šå€‹åƒæ•¸ï¼Œæˆ‘å€‘éœ€è¦å€’æ•¸ç¬¬äºŒå€‹åƒæ•¸ `offset`
                const offset = args[args.length - 2];
                const fullString = args[args.length - 1];

                // æª¢æŸ¥å‰ä¸€å€‹å­—å…ƒæ˜¯å¦ç‚ºè‹±æ–‡å­—æ¯ (é¿å…æ›¿æ›å‹è™Ÿï¼Œå¦‚ UL60950)
                if (offset > 0) {
                    const charBefore = fullString.charAt(offset - 1);
                    // å¦‚æœå‰é¢æ˜¯å­—æ¯æˆ–åº¦æ•¸ç¬¦è™Ÿ(Â°)ï¼Œå‰‡ä¸æ›¿æ›
                    if (/[a-zA-ZÂ°]/.test(charBefore)) {
                        return match; // è¿”å›åŸå§‹åŒ¹é…ï¼Œä¸åšä»»ä½•äº‹
                    }
                }

                // æ¸…ç†åŒ¹é…åˆ°çš„å­—ä¸²ï¼Œå»é™¤å‰å¾Œç©ºç™½
                const cleanedMatch = match.trim();
                if (cleanedMatch === '') return match; // å¦‚æœæ˜¯ç©ºå­—ä¸²ï¼Œä¸è™•ç†

                // æª¢æŸ¥æ­¤æ•¸å€¼æ˜¯å¦å·²ç¶“æœ‰å°æ‡‰çš„ä»£è™Ÿ
                let code = Object.keys(numberMapping).find(key => numberMapping[key] === cleanedMatch);

                // å¦‚æœæ²’æœ‰ï¼Œå‰‡å‰µå»ºä¸€å€‹æ–°çš„ä»£è™Ÿ
                if (!code) {
                    code = generateCode();
                    numberMapping[code] = cleanedMatch;
                }
                
                // è¿”å›æ›¿æ›å¾Œçš„ä»£è™Ÿï¼Œä¸¦ä¿ç•™åŸå§‹åŒ¹é…å­—ä¸²ä¸­çš„ç©ºç™½
                return match.replace(cleanedMatch, `[${code}]`);
            });
        }        

        function displayCodeMapping() {
            const codeMappingDiv = document.getElementById('codeMapping');
            const codeInfoDiv = document.getElementById('codeInfo');
            
            if (Object.keys(numberMapping).length === 0) {
                codeInfoDiv.style.display = 'none';
                document.getElementById('restoreBtn').style.display = 'none';
                return;
            }
            
            let mappingHtml = '<strong>æ•¸å€¼ä»£è™Ÿå°æ‡‰è¡¨ï¼š</strong><br>';
            for (const [code, value] of Object.entries(numberMapping)) {
                mappingHtml += `[${code}] &harr; ${value}<br>`;
            }
            
            codeMappingDiv.innerHTML = mappingHtml;
            codeInfoDiv.style.display = 'block';
            
            // é¡¯ç¤ºé‚„åŸæŒ‰éˆ•
            document.getElementById('restoreBtn').style.display = 'inline-block';
        }

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const fileName = file.name.toLowerCase();
            const isCSV = fileName.endsWith('.csv');
            const isExcel = fileName.endsWith('.xlsx') || fileName.endsWith('.xls');

            if (!isCSV && !isExcel) {
                showImportStatus('è«‹é¸æ“‡CSVæˆ–Excelæª”æ¡ˆ', 'error');
                return;
            }

            showImportStatus('æ­£åœ¨è®€å–æª”æ¡ˆ...', 'processing');

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    if (isCSV) {
                        parseCSV(e.target.result);
                    } else {
                        parseExcel(e.target.result);
                    }
                } catch (error) {
                    showImportStatus('æª”æ¡ˆè®€å–å¤±æ•—: ' + error.message, 'error');
                }
            };

            if (isCSV) {
                reader.readAsText(file);
            } else {
                reader.readAsArrayBuffer(file);
            }
        }

        function parseCSV(csvData) {
            Papa.parse(csvData, {
                header: true,
                skipEmptyLines: true,
                complete: function(results) {
                    if (results.errors.length > 0) {
                        showImportStatus('CSVè§£æéŒ¯èª¤: ' + results.errors[0].message, 'error');
                        return;
                    }
                    processImportedData(results.data);
                }
            });
        }

        function parseExcel(arrayBuffer) {
            const workbook = XLSX.read(arrayBuffer, { type: 'array' });
            const sheetName = workbook.SheetNames[0];
            const worksheet = workbook.Sheets[sheetName];
            const data = XLSX.utils.sheet_to_json(worksheet, { header: 1 });

            if (data.length < 2) {
                showImportStatus('Excelæª”æ¡ˆéœ€è¦è‡³å°‘åŒ…å«æ¨™é¡Œè¡Œå’Œä¸€è¡Œè³‡æ–™', 'error');
                return;
            }

            const headers = data[0].map(h => h.trim());
            const objects = data.slice(1).map(row => {
                const obj = {};
                headers.forEach((header, index) => {
                    obj[header] = row[index] || '';
                });
                return obj;
            });

            processImportedData(objects);
        }

        function processImportedData(data) {
            if (!data || data.length === 0) {
                showImportStatus('æª”æ¡ˆä¸­æ²’æœ‰æ‰¾åˆ°è³‡æ–™', 'error');
                return;
            }

            const firstRow = data[0];
            const hasCategory = 'Category' in firstRow || 'category' in firstRow;
            const hasDescription = 'Description' in firstRow || 'description' in firstRow;

            if (!hasCategory || !hasDescription) {
                showImportStatus('æª”æ¡ˆå¿…é ˆåŒ…å« "Category" å’Œ "Description" æ¬„ä½', 'error');
                return;
            }

            importedData = data.map(row => ({
                category: row.Category || row.category || '',
                description: row.Description || row.description || '',
                usage: row.Usage || row.usage || row.Use || row.use || ''
            })).filter(row => row.category && row.description);

            showImportStatus(`æˆåŠŸåŒ¯å…¥ ${importedData.length} ç­†æ¨™æº–èªå¥`, 'success');
            showDataPreview(importedData.slice(0, 5));
        }

        function showImportStatus(message, type) {
            const statusDiv = document.getElementById('importStatus');
            const messageDiv = document.getElementById('importMessage');
            
            statusDiv.style.display = 'block';
            messageDiv.textContent = message;
            
            messageDiv.className = type === 'success' ? 'import-success' : 
                                 type === 'error' ? 'import-error' : '';
        }

        function showDataPreview(data) {
            const previewDiv = document.getElementById('previewData');
            
            if (data.length === 0) {
                previewDiv.innerHTML = '';
                return;
            }

            let html = '<div class="data-preview"><strong>è³‡æ–™é è¦½ (å‰5ç­†):</strong><table>';
            html += '<tr><th>Category</th><th>Description</th><th>Usage</th></tr>';
            
            data.forEach(row => {
                html += `<tr>
                    <td>${row.category}</td>
                    <td>${row.description.substring(0, 50)}${row.description.length > 50 ? '...' : ''}</td>
                    <td>${row.usage}</td>
                </tr>`;
            });
            
            html += '</table></div>';
            previewDiv.innerHTML = html;
        }

        function updateCharCount(textareaId, counterId) {
            const textarea = document.getElementById(textareaId);
            const counter = document.getElementById(counterId);
            counter.textContent = `${textarea.value.length} å­—å…ƒ`;
        }

        function generatePrompt() {
            const functionDescription = document.getElementById('functionDescription').value.trim();

            if (!functionDescription) {
                alert('è«‹å¡«å¯«å®‰å…¨åŠŸèƒ½é‚è¼¯æè¿°');
                return;
            }

            const protectedDescription = replaceNumbersWithCodes(functionDescription);
            displayCodeMapping();

            const prompt = generatePromptText(protectedDescription);

            document.getElementById('outputText').textContent = prompt;
            document.getElementById('outputSection').style.display = 'block';
            document.getElementById('outputSection').scrollIntoView({ behavior: 'smooth' });
        }

        function generatePromptText(functionDescription) {
            let prompt = `# ULå®‰å…¨åŠŸèƒ½æè¿°å°ˆæ¥­ç¿»è­¯èˆ‡æŠ€è¡“å¯©æŸ¥Prompt

## é›™é‡è§’è‰²è¨­å®š

### è§’è‰²1ï¼šULå®‰è¦å·¥ç¨‹å¸« & æŠ€è¡“ç¿»è­¯å°ˆå®¶
ä½ æ˜¯ä¸€ä½è³‡æ·±çš„ULï¼ˆUnderwriters Laboratoriesï¼‰å®‰è¦å·¥ç¨‹å¸«å’ŒæŠ€è¡“ç¿»è­¯å°ˆå®¶ï¼Œå…·å‚™ï¼š
- è±å¯Œçš„ç”¢å“å®‰å…¨æ¨™æº–çŸ¥è­˜å’Œè‹±æ–‡æŠ€è¡“å¯«ä½œç¶“é©—
- æ·±åº¦äº†è§£IEC/UL/ENç­‰åœ‹éš›å®‰å…¨æ¨™æº–
- ç²¾é€šå®‰å…¨åŠŸèƒ½çš„æŠ€è¡“æ–‡ä»¶æ’°å¯«

### è§’è‰²2ï¼šL3 Reviewerï¼ˆè³‡æ·±æŠ€è¡“å¯©æŸ¥å“¡ï¼‰
åŒæ™‚ä½ ä¹Ÿæ˜¯ä¸€ä½L3 levelçš„æŠ€è¡“å¯©æŸ¥å“¡ï¼Œè² è²¬ï¼š
- å¯©æŸ¥å®‰å…¨åŠŸèƒ½æè¿°çš„æŠ€è¡“å®Œæ•´æ€§
- è­˜åˆ¥å·¥ç¨‹å¸«å¯èƒ½éºæ¼çš„é—œéµæŠ€è¡“ç´°ç¯€
- æå‡ºå°ˆæ¥­çš„æŠ€è¡“æ”¹å–„å»ºè­°

## ä»»å‹™èªªæ˜
è«‹å®Œæˆä»¥ä¸‹å…©å€‹ä»»å‹™ï¼š

**ä»»å‹™1**ï¼šå°‡åŠŸèƒ½é‚è¼¯æè¿°ç¿»è­¯æˆå°ˆæ¥­ã€æº–ç¢ºä¸”ç¬¦åˆULæ¨™æº–çš„è‹±æ–‡å®‰å…¨åŠŸèƒ½æè¿°
**ä»»å‹™2**ï¼šä»¥L3 Reviewerèº«ä»½æª¢æŸ¥æè¿°ä¸­å¯èƒ½éºæ¼çš„æŠ€è¡“ç´°ç¯€ä¸¦æå‡ºæ”¹å–„å»ºè­°

## ç¿»è­¯è¦æ±‚

### èªè¨€è¦æ±‚ï¼š
- **æ™‚æ…‹**ï¼šå…¨éƒ¨ä½¿ç”¨éå»å¼ï¼ˆpast tenseï¼‰
- **èªèª¿**ï¼šå®¢è§€ã€å°ˆæ¥­ã€æŠ€è¡“æ€§
- **ç”¨è©**ï¼šä½¿ç”¨ULå’Œåœ‹éš›å®‰å…¨æ¨™æº–å¸¸ç”¨è¡“èª
- **å¥å¼**ï¼šæ¸…æ™°ã€ç›´æ¥ã€é¿å…å†—é•·è¤‡é›œçš„å¥å­

### çµæ§‹è¦æ±‚ï¼š
1. **è§¸ç™¼æ¢ä»¶**ï¼ˆTrigger Conditionsï¼‰- æ˜ç¢ºæè¿°å•Ÿå‹•æ¢ä»¶å’Œç²¾ç¢ºåƒæ•¸
2. **åŸ·è¡Œå‹•ä½œ**ï¼ˆImplementation Actionsï¼‰- è©³ç´°èªªæ˜ç³»çµ±éŸ¿æ‡‰å’Œæ™‚åº
3. **å®‰å…¨çµæœ**ï¼ˆSafe State, Defined Stateï¼‰- èªªæ˜é æœŸçš„å®‰å…¨æ•ˆæœå’Œé©—è­‰æ–¹æ³•
4. **æ™‚é–“è¦æ ¼**ï¼ˆTiming Specificationsï¼‰- åŒ…å«æ‰€æœ‰ç›¸é—œæ™‚é–“åƒæ•¸å’Œå®¹å·®(åŒ…å«åµæ¸¬é€±æœŸæ™‚é–“ã€åµæ¸¬é˜²æŠ–æ™‚é–“ã€å‹•ä½œæ™‚é–“ã€é‡å•Ÿä¼‘æ¯æ™‚é–“)
5. **å¤±æ•ˆä¿è­·**ï¼ˆFail-safe Measuresï¼‰- æè¿°å¤±æ•ˆä¿è­·æ©Ÿåˆ¶å’Œè¨ºæ–·åŠŸèƒ½
6. **é‡å•Ÿå‹•ä½œ** (Reset Action) - æè¿°é‡æ–°å•Ÿå‹•æ©Ÿåˆ¶:é‡æ–°ä¸Šé›»(æ‰‹å‹•é‡å•Ÿ)ã€è‡ªå‹•é‡å•Ÿã€æœ€å¤§é‡å•Ÿæ¬¡æ•¸ã€ç„¡é™é‡å•Ÿ

## è¼¸å…¥å…§å®¹

**å®‰å…¨åŠŸèƒ½é‚è¼¯æè¿°**ï¼š
\`\`\`
${functionDescription}
\`\`\``;

            if (importedData && importedData.length > 0) {
                prompt += `\n\n## æ¨™æº–èªå¥åº«åƒè€ƒ
è«‹åœ¨ç¿»è­¯æ™‚åƒè€ƒä»¥ä¸‹å·²é©—è­‰çš„æ¨™æº–æè¿°èªå¥ï¼Œä¸¦é©ç•¶æ‡‰ç”¨æ–¼ç¿»è­¯çµæœä¸­ï¼š

### å¯åƒè€ƒçš„æ¨™æº–èªå¥ï¼š`;

                const groupedData = {};
                importedData.forEach(item => {
                    if (!groupedData[item.category]) {
                        groupedData[item.category] = [];
                    }
                    groupedData[item.category].push(item);
                });

                Object.keys(groupedData).forEach(category => {
                    prompt += `\n\n**${category}é¡å‹èªå¥ï¼š**`;
                    groupedData[category].forEach((item, index) => {
                        prompt += `\n${index + 1}. "${item.description}"`;
                        if (item.usage) {
                            prompt += ` (${item.usage})`;
                        }
                    });
                });

                prompt += `\n\n**èªå¥åº«ä½¿ç”¨æŒ‡å¼•ï¼š**
- å„ªå…ˆä½¿ç”¨ä¸Šè¿°æ¨™æº–èªå¥ä½œç‚ºç¿»è­¯çš„åŸºç¤çµæ§‹
- å¯ä»¥æ ¹æ“šå…·é«”åŠŸèƒ½èª¿æ•´èªå¥å…§å®¹ï¼Œä½†ä¿æŒå°ˆæ¥­ç”¨è©å’Œå¥å¼çµæ§‹
- ç¢ºä¿é¸ç”¨çš„èªå¥èˆ‡åŠŸèƒ½é¡å‹ç›¸ç¬¦
- å¦‚éœ€è¦çµ„åˆå¤šå€‹èªå¥ï¼Œè«‹ç¢ºä¿é‚è¼¯é †åºæ­£ç¢º`;
            }

            prompt += `\n\n## è¼¸å‡ºæ ¼å¼è¦æ±‚

### ç¬¬ä¸€éƒ¨åˆ†ï¼šProfessional English Description
[æä¾›ä¸»è¦çš„è‹±æ–‡ç¿»è­¯ï¼Œç¢ºä¿ä½¿ç”¨éå»å¼å’Œå°ˆæ¥­è¡“èª${importedData ? 'ï¼Œä¸¦é©ç•¶æ‡‰ç”¨æ¨™æº–èªå¥åº«ä¸­çš„è¡¨é”æ–¹å¼' : ''}]

### ç¬¬äºŒéƒ¨åˆ†ï¼šTechnical Specifications
- **Activation Condition**: [è§¸ç™¼æ¢ä»¶çš„è‹±æ–‡æè¿°ï¼ŒåŒ…å«ç²¾ç¢ºåƒæ•¸]
- **System Response**: [ç³»çµ±éŸ¿æ‡‰çš„è‹±æ–‡æè¿°ï¼ŒåŒ…å«æ™‚åºè¦æ±‚]  
- **Safety Outcome**: [å®‰å…¨çµæœçš„è‹±æ–‡æè¿°ï¼ŒåŒ…å«é©—è­‰æ¨™æº–]
- **Response Time**: [éŸ¿æ‡‰æ™‚é–“è¦æ ¼ï¼ŒåŒ…å«å®¹å·®ç¯„åœ]
- **Fail-safe Mode**: [å¤±æ•ˆä¿è­·æ¨¡å¼ï¼ŒåŒ…å«è¨ºæ–·åŠŸèƒ½]

### ç¬¬ä¸‰éƒ¨åˆ†ï¼šAlternative Professional Phrasing
[æä¾›1-2å€‹åŒç¾©ä½†ç•¥æœ‰ä¸åŒè¡¨é”æ–¹å¼çš„å°ˆæ¥­ç‰ˆæœ¬${importedData ? 'ï¼Œå¯ä½¿ç”¨èªå¥åº«ä¸­çš„ä¸åŒè¡¨é”æ–¹å¼' : ''}]

### ç¬¬å››éƒ¨åˆ†ï¼šL3 Reviewer Technical Analysis
**ä½œç‚ºL3 Reviewerï¼Œæˆ‘è­˜åˆ¥å‡ºä»¥ä¸‹å¯èƒ½éœ€è¦è£œå¼·çš„æŠ€è¡“ç´°ç¯€ï¼š**

**â— Critical Technical Questionsï¼ˆé—œéµæŠ€è¡“å•é¡Œï¼‰ï¼š**

1. **[æŠ€è¡“å•é¡Œ1]**: [å…·é«”æŒ‡å‡ºå¯èƒ½éºæ¼çš„æŠ€è¡“ç´°ç¯€ï¼Œä¾‹å¦‚è§¸ç™¼æº–ä½çš„ç²¾ç¢ºåº¦ã€ç’°å¢ƒæ¢ä»¶å½±éŸ¿ã€æ ¡æº–è¦æ±‚ç­‰]

2. **[æŠ€è¡“å•é¡Œ2]**: [æŒ‡å‡ºæ™‚åºç›¸é—œçš„æŠ€è¡“ç´°ç¯€ï¼Œä¾‹å¦‚éŸ¿æ‡‰æ™‚é–“çš„æ¸¬é‡æ–¹æ³•ã€å»¶é²åˆ†æã€æ™‚åºåœ–è¦æ±‚ç­‰]

3. **[æŠ€è¡“å•é¡Œ3]**: [æŒ‡å‡ºå®‰å…¨è¨­è¨ˆç›¸é—œçš„æŠ€è¡“ç´°ç¯€ï¼Œä¾‹å¦‚å¤±æ•ˆæ¨¡å¼åˆ†æã€å†—é¤˜è¨­è¨ˆã€è¨ºæ–·è¦†è“‹ç‡ç­‰]

**ğŸ”§ Technical Recommendationsï¼ˆæŠ€è¡“å»ºè­°ï¼‰ï¼š**
- [å»ºè­°éœ€è¦è£œå……çš„æŠ€è¡“è¦æ ¼]
- [å»ºè­°çš„æ¸¬è©¦é©—è­‰æ–¹æ³•]
- [å»ºè­°çš„æ¨™æº–åˆè¦æ€§æª¢æŸ¥]

**ğŸ“‹ Missing Documentation Requirementsï¼ˆå¯èƒ½ç¼ºå°‘çš„æ–‡ä»¶è¦æ±‚ï¼‰ï¼š**
- [å»ºè­°éœ€è¦æº–å‚™çš„æŠ€è¡“æ–‡ä»¶]
- [å»ºè­°çš„æ¸¬è©¦å ±å‘Šæ ¼å¼]
- [å»ºè­°çš„èªè­‰ç­–ç•¥]

### ç¬¬äº”éƒ¨åˆ†ï¼šUL Standard Compliance Check
[ç¢ºèªä½¿ç”¨çš„è¡“èªæ˜¯å¦ç¬¦åˆULæ¨™æº–ï¼Œä¸¦æä¾›ä»»ä½•å»ºè­°çš„æ”¹é€²${importedData ? 'ï¼Œé©—è­‰æ˜¯å¦æ­£ç¢ºæ‡‰ç”¨äº†æ¨™æº–èªå¥åº«' : ''}]

## é‡è¦æé†’
- ç¢ºä¿æ‰€æœ‰å‹•è©éƒ½ä½¿ç”¨éå»å¼
- ä½¿ç”¨ç²¾ç¢ºçš„æŠ€è¡“è¡“èªå’Œæ•¸å€¼è¦æ ¼
- ä¿æŒæè¿°çš„å®¢è§€æ€§å’Œå°ˆæ¥­æ€§
- L3 Reviewerçš„åˆ†æè¦å…·é«”ä¸”å¯æ“ä½œ
- è­˜åˆ¥çš„æŠ€è¡“å•é¡Œè¦èƒ½å¤ å¹«åŠ©å·¥ç¨‹å¸«æ”¹å–„è¨­è¨ˆæ–‡ä»¶${importedData ? '\n- å–„ç”¨æ¨™æº–èªå¥åº«æå‡ç¿»è­¯çš„å°ˆæ¥­æ€§å’Œä¸€è‡´æ€§' : ''}

è«‹é–‹å§‹åŸ·è¡Œä¸Šè¿°å…©é …ä»»å‹™ã€‚`;

            return prompt;
        }

        function showCopySuccess(buttonElement, originalText) {
            buttonElement.textContent = 'âœ… å·²è¤‡è£½ï¼';
            const originalBg = buttonElement.style.backgroundColor;
            buttonElement.style.background = '#218838';
            
            setTimeout(() => {
                buttonElement.textContent = originalText;
                buttonElement.style.background = originalBg;
            }, 2000);
        }
        
        function fallbackCopyTextToClipboard(text, buttonElement, originalText) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-999999px";
            textArea.style.top = "-999999px";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showCopySuccess(buttonElement, originalText);
            } catch (err) {
                alert('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•é¸å–æ–‡å­—è¤‡è£½');
            }
            
            document.body.removeChild(textArea);
        }

        function copyToClipboard() {
            const outputText = document.getElementById('outputText').textContent;
            const btn = event.target;
            const originalText = btn.textContent;
            
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(outputText).then(() => {
                    showCopySuccess(btn, originalText);
                }).catch(err => {
                    fallbackCopyTextToClipboard(outputText, btn, originalText);
                });
            } else {
                fallbackCopyTextToClipboard(outputText, btn, originalText);
            }
        }

        function downloadFile(filename, text) {
            const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function downloadPrompt() {
            const outputText = document.getElementById('outputText').textContent;
            downloadFile(`UL_Safety_Function_Prompt_${new Date().getTime()}.txt`, outputText);
        }

        function clearForm() {
            if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰å…§å®¹é‡æ–°å¡«å¯«å—ï¼Ÿ')) {
                document.getElementById('functionDescription').value = '';
                document.getElementById('descCharCount').textContent = '0 å­—å…ƒ';
                document.getElementById('outputSection').style.display = 'none';
                document.getElementById('codeInfo').style.display = 'none';
                document.getElementById('restoreBtn').style.display = 'none';
                document.getElementById('aiResponse').value = '';
                document.getElementById('restoredResponse').value = '';
                numberMapping = {};
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function restoreNumbers() {
            const aiResponse = document.getElementById('aiResponse').value;
            const restoredResponseTextarea = document.getElementById('restoredResponse');

            if (!aiResponse.trim()) {
                restoredResponseTextarea.value = "è«‹å…ˆåœ¨ä¸Šæ–¹æ¬„ä½è²¼å…¥AIçš„å›å¾©å…§å®¹ã€‚";
                return;
            }

            if (Object.keys(numberMapping).length === 0) {
                 restoredResponseTextarea.value = "éŒ¯èª¤ï¼šæ²’æœ‰å¯ç”¨çš„æ•¸å€¼å°æ‡‰è¡¨ã€‚è«‹å…ˆç”ŸæˆPromptæ‰èƒ½é€²è¡Œé‚„åŸã€‚";
                 return;
            }

            let restoredText = aiResponse;
            for (const [code, value] of Object.entries(numberMapping)) {
                // å»ºç«‹ä¸€å€‹æ­£è¦è¡¨é”å¼ä¾†å°‹æ‰¾ `[CODE]`ï¼Œä¸¦å…¨åŸŸã€ä¸åˆ†å¤§å°å¯«åœ°æ›¿æ›
                const codePattern = new RegExp(`\\[${code}\\]`, 'gi');
                restoredText = restoredText.replace(codePattern, value);
            }

            restoredResponseTextarea.value = restoredText;
        }
        
        function copyRestored() {
            const restoredText = document.getElementById('restoredResponse').value;
            const btn = event.target;
            const originalText = btn.textContent;

            if (!restoredText.trim()) {
                alert('æ²’æœ‰å¯è¤‡è£½çš„å…§å®¹ã€‚');
                return;
            }
            
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(restoredText).then(() => {
                    showCopySuccess(btn, originalText);
                }).catch(err => {
                    fallbackCopyTextToClipboard(restoredText, btn, originalText);
                });
            } else {
                fallbackCopyTextToClipboard(restoredText, btn, originalText);
            }
        }

        function downloadRestored() {
            const restoredText = document.getElementById('restoredResponse').value;
            if (!restoredText.trim()) {
                alert('æ²’æœ‰å¯ä¸‹è¼‰çš„å…§å®¹ã€‚');
                return;
            }
            downloadFile(`Restored_Description_${new Date().getTime()}.txt`, restoredText);
        }

        document.addEventListener('DOMContentLoaded', function() {
            updateCharCount('functionDescription', 'descCharCount');
        });
    </script>
</body>
</html>