<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­æ–‡ç·¨ç¢¼æ¸¬è©¦</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
            padding: 2rem;
            line-height: 1.6;
        }
        .test-section {
            border: 1px solid #ddd;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }
        .result {
            background: #f0f0f0;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 4px;
        }
        button {
            background: #007bff;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>ä¸­æ–‡ç·¨ç¢¼å•é¡Œè¨ºæ–·å·¥å…·</h1>
    
    <div class="test-section">
        <h2>1. åŸºæœ¬ä¸­æ–‡é¡¯ç¤ºæ¸¬è©¦</h2>
        <p>é€™æ˜¯æ­£å¸¸çš„ä¸­æ–‡å­—ï¼šä½ å¥½ä¸–ç•Œï¼PPT Party å…­æœˆå ´æ¬¡</p>
        <p>è¡¨æƒ…ç¬¦è™Ÿæ¸¬è©¦ï¼šğŸ‰ğŸ“…ğŸ’¡ğŸ“ğŸ±</p>
    </div>

    <div class="test-section">
        <h2>2. éŒ¯èª¤ç·¨ç¢¼ä¿®æ­£æ¸¬è©¦</h2>
        <p>åŸå§‹éŒ¯èª¤æ–‡å­—ï¼š</p>
        <div class="result" id="original-text">
            Ã°Â©ğŸ‰ PPT Party<br>
            Ã°ğŸ“… Ã¥â€¦Â­Ã¦Å“Ë†Ã¥ Â´Ã¦Â¬Â¡Ã¦â„¢â€šÃ©â€“"Ã¯Â¼Å¡6/1Ã£â‚¬6/8Ã£â‚¬6/29Ã¯Â¼Ë†Ã©â‚¬Â±Ã¦â€”Â¥Ã¯Â¼â€°Ã¤Â¸Â­Ã¥Ë† 12:30Ã¢â‚¬"13:30<br>
            Ã°ğŸ’¡ Ã§Â²Â¾Ã¥Â½Â©Ã§Â°Â¡Ã¥ Â±Ã¨Â¼ÂªÃ§â€¢ÂªÃ§â„¢Â»Ã¥ Â´<br>
            Ã°ğŸ“ Ã¤Â¸Â»Ã©Â¡Å’Ã¨Ë†â€¡Ã¥ Â´Ã¦Â¬Â¡Ã¤Â¸â‚¬Ã¨Â¦Â½Ã¯Â¼Å¡https://reurl.cc/qGbLM3<br>
            Ã¨Âª Ã¦Â½"é‚€è«‹å¼Ÿå…„å§Šå¦¹èˆ‡Ã§Â¦Ã©Å¸Â³Ã¦Å“â€¹Ã¥â€¹Ã¤Â¸â‚¬Ã¨ÂµÂ·Ã¥Ë†â€ Ã¤ÂºÂ«Ã§"Å¸Ã¦Â´Â»Ã¯Â¼<br>
            Ã°ğŸ± Ã¤Â¸Â­Ã¥Ë†12:00Ã¦Â­Â¡Ã¨Â¿Å½Ã¤Â¸â‚¬Ã¨ÂµÂ·Ã¥â€¦Ë†Ã¤Â¾â€ Ã¥Ë†Ã©Â¤Ã¯Â¼
        </div>
        
        <button onclick="fixEncoding()">ä¿®æ­£ç·¨ç¢¼</button>
        
        <p>ä¿®æ­£å¾Œæ–‡å­—ï¼š</p>
        <div class="result" id="fixed-text"></div>
    </div>

    <div class="test-section">
        <h2>3. GitHub æª”æ¡ˆç·¨ç¢¼æ¸¬è©¦</h2>
        <button onclick="testGitHubFetch()">æ¸¬è©¦ GitHub æª”æ¡ˆè®€å–</button>
        <div class="result" id="github-result"></div>
    </div>

    <script>
        function fixEncoding() {
            const original = document.getElementById('original-text').textContent;
            let fixed = original;
            
            // å¸¸è¦‹ä¸­æ–‡ç·¨ç¢¼éŒ¯èª¤çš„ä¿®æ­£å°æ‡‰è¡¨
            const fixMap = {
                'Ã°Â©': 'ğŸ‰',
                'Ã°ğŸ“…': 'ğŸ“…',
                'Ã°ğŸ’¡': 'ğŸ’¡', 
                'Ã°ğŸ“': 'ğŸ“',
                'Ã°ğŸ±': 'ğŸ±',
                'Ã¥â€¦Â­Ã¦Å“Ë†': 'å…­æœˆ',
                'Ã¥ Â´Ã¦Â¬Â¡': 'å ´æ¬¡',
                'Ã¦â„¢â€šÃ©â€“"': 'æ™‚é–“',
                'Ã¯Â¼Å¡': 'ï¼š',
                'Ã£â‚¬': 'ã€',
                'Ã¯Â¼Ë†': 'ï¼ˆ',
                'Ã©â‚¬Â±Ã¦â€”Â¥': 'é€±æ—¥',
                'Ã¯Â¼â€°': 'ï¼‰',
                'Ã¤Â¸Â­Ã¥Ë†': 'ä¸­åˆ',
                'Ã¢â‚¬"': 'â€“',
                'Ã§Â²Â¾Ã¥Â½Â©': 'ç²¾å½©',
                'Ã§Â°Â¡Ã¥ Â±': 'ç°¡å ±',
                'Ã¨Â¼Âª': 'è¼ª',
                'Ã§â€¢Âª': 'ç•ª',
                'Ã§â„¢Â»': 'ç™»',
                'Ã¥ Â´': 'å ´',
                'Ã¤Â¸Â»Ã©Â¡Å’': 'ä¸»é¡Œ',
                'Ã¨Ë†â€¡': 'èˆ‡',
                'Ã¤Â¸â‚¬Ã¨Â¦Â½': 'ä¸€è¦½',
                'Ã¨Âª Ã¦Â½"': 'èª æ‘¯',
                'Ã©â€šâ‚¬Ã¨Â«â€¹': 'é‚€è«‹',
                'Ã¥Â¼Å¸Ã¥â€¦â€': 'å¼Ÿå…„',
                'Ã¥Â§Å Ã¥Â¦Â¹': 'å§Šå¦¹',
                'Ã§Â¦Ã©Å¸Â³': 'ç¦éŸ³',
                'Ã¦Å“â€¹Ã¥â€¹': 'æœ‹å‹',
                'Ã¤Â¸â‚¬Ã¨ÂµÂ·': 'ä¸€èµ·',
                'Ã¥Ë†â€ Ã¤ÂºÂ«': 'åˆ†äº«',
                'Ã§"Å¸Ã¦Â´Â»': 'ç”Ÿæ´»',
                'Ã¯Â¼': 'ï¼',
                'Ã¦Â­Â¡Ã¨Â¿Å½': 'æ­¡è¿',
                'Ã¥â€¦Ë†Ã¤Â¾â€ ': 'å…ˆä¾†',
                'Ã¥Ë†Ã©Â¤': 'åˆé¤'
            };
            
            Object.keys(fixMap).forEach(key => {
                fixed = fixed.replace(new RegExp(key, 'g'), fixMap[key]);
            });
            
            document.getElementById('fixed-text').textContent = fixed;
        }

        async function testGitHubFetch() {
            const resultDiv = document.getElementById('github-result');
            resultDiv.innerHTML = 'æ¸¬è©¦ä¸­...';
            
            try {
                // æ¸¬è©¦è®€å–æ‚¨çš„ GitHub æª”æ¡ˆ
                const response = await fetch('https://api.github.com/repos/Fi5herL/fi5herl.github.io/contents/README.md');
                const data = await response.json();
                
                if (data.content) {
                    // æ­£ç¢ºçš„ UTF-8 è§£ç¢¼æ–¹å¼
                    const binaryString = atob(data.content);
                    const bytes = new Uint8Array(binaryString.length);
                    for (let i = 0; i < binaryString.length; i++) {
                        bytes[i] = binaryString.charCodeAt(i);
                    }
                    const content = new TextDecoder('utf-8').decode(bytes);
                    
                    resultDiv.innerHTML = `
                        <h4>æˆåŠŸè®€å–æª”æ¡ˆ</h4>
                        <p><strong>æª”æ¡ˆå¤§å°ï¼š</strong>${data.size} bytes</p>
                        <p><strong>ç·¨ç¢¼ï¼š</strong>${data.encoding}</p>
                        <p><strong>å…§å®¹é è¦½ï¼š</strong></p>
                        <pre style="max-height: 200px; overflow-y: auto; background: #f8f9fa; padding: 1rem; border-radius: 4px;">${content.substring(0, 500)}...</pre>
                    `;
                } else {
                    resultDiv.innerHTML = '<p style="color: red;">ç„¡æ³•å–å¾—æª”æ¡ˆå…§å®¹</p>';
                }
            } catch (error) {
                resultDiv.innerHTML = `<p style="color: red;">éŒ¯èª¤ï¼š${error.message}</p>`;
            }
        }

        // é é¢è¼‰å…¥æ™‚è‡ªå‹•åŸ·è¡Œä¿®æ­£æ¸¬è©¦
        document.addEventListener('DOMContentLoaded', function() {
            console.log('é é¢è¼‰å…¥å®Œæˆï¼Œå­—ç¬¦ç·¨ç¢¼æ¸¬è©¦å¯ç”¨');
        });
    </script>
</body>
</html>